(function(t){function e(e){for(var r,o,n=e[0],l=e[1],c=e[2],u=0,p=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],r=!0,n=1;n<s.length;n++){var l=s[n];0!==a[l]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var r={},a={app:0},i=[];function o(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=r,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(s,r,function(e){return t[e]}.bind(null,r));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/c868/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},1:function(t,e){},2:function(t,e){},"4d44":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e),s.d(e,"router",(function(){return Xr}));s("14d9");var r=s("a026"),a=s("8c4f"),i=(s("f9e3"),s("2dd8"),s("5f5b")),o=s("b1e0"),n=function(){var t=this,e=t._self._c;return e("div",[e("frontend-nav"),e("alerts"),e("router-view")],1)},l=[],c=function(){var t=this,e=t._self._c;return e("b-navbar",{staticStyle:{"margin-bottom":"20px"},attrs:{toggleable:"lg",type:"light",variant:"light"}},[e("div",{staticClass:"container"},[e("b-navbar-brand",{attrs:{to:{name:"home"}}},[e("img",{attrs:{src:s("b87e"),alt:"gavel icon",width:"20",height:"20"}}),t._v(" Law Manager ")]),e("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),e("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[t.isLoggedIn()?e("b-navbar-nav",[e("b-nav-item",{attrs:{to:{name:"clients"}}},[t._v("Clients")]),e("b-nav-item",{attrs:{to:{name:"matters"}}},[t._v("Matters")]),e("b-nav-item",{attrs:{to:{name:"transactions"}}},[t._v("Transactions")]),e("b-nav-item",{attrs:{to:{name:"appointments"}}},[t._v("Appointments")]),e("b-nav-dropdown",{attrs:{text:"Reports"}},[e("b-nav-item",{attrs:{to:{name:"audit_report"}}},[t._v("Audit Report")]),e("b-nav-item",{attrs:{to:{name:"referrer_report"}}},[t._v("Referrer Report")]),e("b-nav-item",{attrs:{to:{name:"outstanding_balances_report"}}},[t._v("Outstanding Balances Report")])],1)],1):t._e(),e("b-navbar-nav",{staticClass:"ml-auto"},[t.isLoggedIn()?e("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("b-icon-gear-fill")]},proxy:!0}],null,!1,3569990688)},[e("b-nav-item",{attrs:{to:{name:"referrers"}}},[t._v("Referrers")]),t.canModifyUsers()?e("b-nav-item",{attrs:{to:{name:"users"}}},[t._v("Users")]):t._e(),e("b-nav-item",{attrs:{to:{name:"workflows"}}},[t._v("Workflows")])],1):t._e(),t.isLoggedIn()?e("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("b-icon-person-fill")]},proxy:!0}],null,!1,3045651460)},[t.isLoggedIn()?e("b-nav-item",{on:{click:t.logout}},[t._v("Log out")]):t._e()],1):t._e(),t.isLoggedIn()?t._e():e("b-nav-item",{attrs:{to:{name:"login"}}},[t._v("Log in")])],1)],1)],1)])},d=[],u=s("793c"),p={name:"Nav",methods:{isLoggedIn(){return u["a"].isLoggedIn()},canModifyUsers(){return u["a"].canModifyUsers()},logout(){u["a"].logout(),this.$router.push({name:"login"})}}},m=p,f=s("2877"),h=Object(f["a"])(m,c,d,!1,null,"4fbfa196",null),g=h.exports,b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},t._l(t.alerts,(function(s){return e("b-alert",{key:s.message,attrs:{show:"",dismissible:"",variant:s.alertType},domProps:{innerHTML:t._s(s.message)}})})),1)])])},v=[],_=s("2f62"),w={name:"Alerts",computed:{...Object(_["b"])({alerts:"getAlerts"})}},k=w,y=Object(f["a"])(k,b,v,!1,null,"2c57e054",null),C=y.exports,x={name:"App",components:{"frontend-nav":g,alerts:C,"router-view":a["a"]}},$=x,T=Object(f["a"])($,n,l,!1,null,null,null),S=T.exports,A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v("Welcome, "+t._s(t.user.name)+"!")])])]),t._m(0),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-lg"},[e("task-table",{attrs:{tasks:t.tasks,"exclude-staff":""}})],1)]),e("hr"),t._m(1),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-lg"},[e("appointment-table",{attrs:{appointments:t.appointments,"exclude-staff":""}})],1)])])},E=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-lg"},[e("h3",[t._v("Tasks to be completed")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-lg"},[e("h3",[t._v("Upcoming Appointments")])])])}],O=function(){var t=this,e=t._self._c;return e("div",[e("b-input",{attrs:{type:"text",placeholder:"Type to filter"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("b-table",{attrs:{id:"appointmentsTable",bordered:"",striped:"","show-empty":"",responsive:"",items:t.appointments,fields:t.fields,"sort-by":"start","filter-included-fields":["title","matter_title","client_name","location","staff_name"],filter:t.filter,"per-page":t.pageSize,"current-page":t.currentPage},on:{filtered:t.filtered},scopedSlots:t._u([{key:"cell(title)",fn:function(s){return[e("router-link",{attrs:{to:{name:"appointment",params:{id:s.item.id}}}},[t._v(t._s(s.item.title))])]}},{key:"cell(matter)",fn:function(s){return[e("router-link",{attrs:{to:{name:"matter",params:{id:s.item.matter_id}}}},[t._v(t._s(s.item.client_name)+" - "+t._s(s.item.matter_title))])]}}])}),e("div",{staticClass:"overflow-auto"},[e("b-pagination",{attrs:{"total-rows":t.rowCount,"per-page":t.pageSize,"aria-controls":"appointmentsTable"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},L=[],P=s("2ef0"),N=s.n(P);const R=t=>new Date(t+"Z").toLocaleString(),M=t=>{let[e,s]=R(t).split(", "),[r,a,i]=e.split("/");r=N.a.padStart(r,2,"0"),a=N.a.padStart(a,2,"0"),e=i+"-"+r+"-"+a;let[o,n]=s.split(" "),[l,c,d]=o.split(":");return"PM"===n&&(l=String(Number(l)+12)),s=l+":"+c+":"+d,[e,s]},U=t=>new Date(t).toISOString().slice(0,-5);var I={name:"AppointmentTable",props:{appointments:{type:Array,required:!0},excludeMatter:{type:Boolean,default:!1},excludeStaff:{type:Boolean,default:!1},pageSize:{type:Number,default:10}},data(){return{filter:null,currentPage:1,rowCount:null}},computed:{fields(){let t=["title","location",{key:"start",formatter:R},{key:"end",formatter:R}];return this.excludeMatter||t.splice(1,0,{key:"matter",label:"Matter"}),this.excludeStaff||t.push({key:"staff_name",label:"Staff"}),t}},updated(){null==this.rowCount&&(this.rowCount=this.appointments.length)},methods:{filtered(t){this.rowCount=t.length,this.currentPage=1}}},D=I,q=Object(f["a"])(D,O,L,!1,null,"6829e344",null),j=q.exports,z=s("db82"),W=s.n(z);const B="https://gd-c868-be.herokuapp.com/api",F=()=>{if(!u["a"].isLoggedIn()||u["a"].loginExpired())throw Xr.push({name:"login",params:{error:"Please login"}}),"Not logged in"};class V{constructor(t,e,s){if(this.resource=t,this.resource_path=B+"/"+t+"/",null!=e&&(this.overridePlural=e),this.include={create:!0,get:!0,list:!0,update:!0,delete:!0},null!=s){if(null!=s.except&&null!=s.only)throw"Specify either except or only, but not both";null!=s.only&&N.a.keys(this.include).forEach(t=>{this.include[t]=s.only.includes(t)}),null!=s.except&&s.except.forEach(t=>{this.include[t]=!1})}}endpoints(){const t=N.a.upperFirst(N.a.camelCase(this.resource));let e=t+"s";null!=this.overridePlural&&(e=this.overridePlural);const s={};return this.include.create&&(s["create"+t]=this.createEndpoint()),this.include.get&&(s["get"+t]=this.getEndpoint()),this.include.list&&(s["get"+e]=this.listEndpoint()),this.include.delete&&(s["delete"+t]=this.deleteEndpoint()),this.include.update&&(s["update"+t]=this.updateEndpoint()),s}createEndpoint(){return t=>(F(),new Promise((e,s)=>{W.a.post(this.resource_path).set("Authorization","Bearer "+u["a"].getToken()).send(t).end((t,r)=>{if(r.ok)e(r.body);else{let t=[];r.body.detail.forEach(e=>{t.push(e.msg)}),s(t)}})}))}getEndpoint(){return t=>(F(),new Promise((e,s)=>{W.a.get(this.resource_path+t).set("Authorization","Bearer "+u["a"].getToken()).end((t,r)=>{r.ok?e(r.body):s(r.statusCode)})}))}listEndpoint(){return()=>(F(),new Promise((t,e)=>{W.a.get(this.resource_path).set("Authorization","Bearer "+u["a"].getToken()).end((s,r)=>{r.ok?t(r.body):e(r.statusCode)})}))}deleteEndpoint(){return t=>(F(),new Promise((e,s)=>{W.a.delete(this.resource_path+t).set("Authorization","Bearer "+u["a"].getToken()).end((t,r)=>{if(r.ok)e(r.body);else{let t=[];r.body.detail.forEach(e=>{t.push(e.msg)}),s(t)}})}))}updateEndpoint(){return(t,e)=>(F(),new Promise((s,r)=>{W.a.patch(this.resource_path+t).set("Authorization","Bearer "+u["a"].getToken()).send(e).end((t,e)=>{if(e.ok)s(e.body);else{let t=[];e.body.detail.forEach(e=>{t.push(e.msg)}),r(t)}})}))}}var H={login(t,e){return new Promise((s,r)=>{W.a.post(B+"/login").send({email:t,password:e}).end((t,e)=>{e.ok?s(e.body):r(e.statusCode)})})},...new V("appointment").endpoints(),...new V("client").endpoints(),...new V("matter").endpoints(),...new V("note",null,{only:["create"]}).endpoints(),...new V("referrer").endpoints(),...new V("step",null,{except:["list"]}).endpoints(),...new V("task",null,{only:["update","delete"]}).endpoints(),...new V("task_template",null,{except:["list"]}).endpoints(),...new V("transaction").endpoints(),...new V("user").endpoints(),...new V("workflow").endpoints(),getReport:t=>(F(),new Promise((e,s)=>{W.a.get(B+"/report/"+t).set("Authorization","Bearer "+u["a"].getToken()).end((t,r)=>{r.ok?e(r.body):s(r.statusCode)})}))},Y=function(){var t=this,e=t._self._c;return e("div",[e("b-input",{attrs:{type:"text",placeholder:"Type to filter"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("b-table",{attrs:{id:"task-table",bordered:"",striped:"","show-empty":"",responsive:"",items:t.tasks,fields:t.fields,filter:t.filter,"sort-by":"id","filter-included-fields":["status","name","description","staff_name","matter_name"],"per-page":t.pageSize,"current-page":t.currentPage},on:{filtered:t.filtered},scopedSlots:t._u([{key:"cell(actions)",fn:function(s){return["Incomplete"===s.item.status?e("b-button-group",[e("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(e){return t.completeTask(s.item.id)}}},[t._v("Complete")]),e("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.cancelTask(s.item.id)}}},[t._v("Cancel")])],1):e("div",[t._v("n/a")])]}},{key:"cell(matter_name)",fn:function(s){return[e("router-link",{attrs:{to:{name:"matter",params:{id:s.item.id}}}},[t._v(t._s(s.item.matter_name))])]}}])}),e("div",{staticClass:"overflow-auto"},[e("b-pagination",{attrs:{"total-rows":t.rowCount,"per-page":t.pageSize,"aria-controls":"task-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},J=[],K={name:"TaskTable",props:{tasks:{type:Array,required:!0},excludeMatter:{type:Boolean,default:!1},excludeStaff:{type:Boolean,default:!1},pageSize:{type:Number,default:5}},data(){return{filter:null,currentPage:1,rowCount:null}},computed:{fields(){let t=["status","name","description",{key:"created",formatter:R},{key:"updated",formatter:R},"actions"];return this.excludeStaff||t.splice(3,0,{key:"staff_name",label:"Staff"}),this.excludeMatter||t.splice(3,0,{key:"matter_name",label:"Matter"}),t}},updated(){null==this.rowCount&&(this.rowCount=this.tasks.length)},methods:{completeTask(t){let e=N.a.find(this.tasks,{id:t});e.status="Completed",H.updateTask(t,e).then(()=>{this.$store.commit("setAlertSuccess","Task completed.")}).catch(()=>{this.$store.commit("setAlertError","Task could not be completed.")})},cancelTask(t){H.deleteTask(t).then(()=>{this.tasks=N.a.reject(this.tasks,{id:t}),this.$store.commit("setAlertSuccess","Task cancelled.")}).catch(()=>{this.$store.commit("setAlertError","Task could not be cancelled.")})},filtered(t){this.rowCount=t.length,this.currentPage=1}}},Z=K,G=Object(f["a"])(Z,Y,J,!1,null,"89d02744",null),X=G.exports,Q={name:"Home",components:{"appointment-table":j,"task-table":X},data(){return{user:{},appointments:[],tasks:[]}},async created(){this.getUserData()},methods:{getUserData(){H.getUser(u["a"].getUserId()).then(t=>{this.user=t;const e=new Date;this.user.appointments.forEach(t=>{(new Date(t.start)>e||new Date(t.end)>e)&&this.appointments.push(t)}),this.user.tasks.forEach(t=>{"Completed"!==t.status&&this.tasks.push(t)})}).catch(t=>{404===t?(this.$store.commit("setAlertError","User not found."),this.$router.push({name:"users"})):console.log(t)})}}},tt=Q,et=Object(f["a"])(tt,A,E,!1,null,"138ad824",null),st=et.exports,rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[t._m(0),e("div",{staticClass:"col-lg"},[e("b-button",{attrs:{variant:"primary",to:{name:"new_client"}}},[t._v("New")])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("client-table",{attrs:{clients:t.clients}})],1)])])},at=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-11"},[e("h1",[t._v("Clients")])])}],it=function(){var t=this,e=t._self._c;return e("div",[e("b-input",{attrs:{type:"text",placeholder:"Type to filter"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("b-table",{attrs:{id:"client-table",bordered:"",striped:"","show-empty":"",responsive:"",items:t.clients,fields:t.fields,"sort-by":"last_name","filter-included-fields":["last_name","middle_name","suffix","first_name"],filter:t.filter,"per-page":t.pageSize,"current-page":t.currentPage},on:{filtered:t.filtered},scopedSlots:t._u([{key:"cell(name)",fn:function(s){return[e("router-link",{attrs:{to:{name:"client",params:{id:s.item.id}}}},[t._v(t._s(t.fullName(s.item)))])]}},{key:"cell(address)",fn:function(s){return[e("span",{domProps:{innerHTML:t._s(t.address(s.item))}})]}}])}),e("div",{staticClass:"overflow-auto"},[e("b-pagination",{attrs:{"total-rows":t.rowCount,"per-page":t.pageSize,"aria-controls":"client-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},ot=[];const nt=t=>{let e=t.last_name;return null!=t.suffix&&(e+=" "+t.suffix),e+=", "+t.first_name,t.middle_name&&(e+=" "+t.middle_name),e},lt=(t,e)=>{let s=t+":<ul>";return e.forEach(t=>{s+=`<li>${t}</li>`}),s+="</ul>",s};var ct={name:"ClientTable",props:{clients:{type:Array,required:!0},pageSize:{type:Number,default:10}},data(){return{fields:["name","address","phone_number","email",{key:"created",formatter:R},{key:"updated",formatter:R}],filter:null,currentPage:1,rowCount:null}},updated(){null==this.rowCount&&(this.rowCount=this.clients.length)},methods:{fullName:nt,address(t){let e=t.address_1+"<br/>";return null!=t.address_2&&(e+=t.address_2+"<br/>"),e+=t.city+", "+t.state+" "+t.zip_code,e},filtered(t){this.rowCount=t.length,this.currentPage=1}}},dt=ct,ut=Object(f["a"])(dt,it,ot,!1,null,"a9c289d8",null),pt=ut.exports,mt={name:"ClientList",components:{"client-table":pt},data(){return{clients:[]}},async created(){this.loadClients()},methods:{loadClients(){H.getClients().then(t=>{this.clients=t})}}},ft=mt,ht=Object(f["a"])(ft,rt,at,!1,null,"4c99d846",null),gt=ht.exports,bt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v(t._s(t.title()))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-form",{on:{submit:t.save}},[e("b-form-group",{attrs:{id:"first_name_group",label:"First name","label-for":"first_name","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"first_name",type:"text",required:""},model:{value:t.client.first_name,callback:function(e){t.$set(t.client,"first_name",e)},expression:"client.first_name"}})],1),e("b-form-group",{attrs:{id:"middle_name_group",label:"Middle name","label-for":"middle_name","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"middle_name",type:"text"},model:{value:t.client.middle_name,callback:function(e){t.$set(t.client,"middle_name",e)},expression:"client.middle_name"}})],1),e("b-form-group",{attrs:{id:"last_name_group",label:"Last name","label-for":"last_name","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"last_name",type:"text",required:""},model:{value:t.client.last_name,callback:function(e){t.$set(t.client,"last_name",e)},expression:"client.last_name"}})],1),e("b-form-group",{attrs:{id:"suffix_group",label:"Suffix","label-for":"suffix","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-select",{attrs:{id:"suffix",options:t.suffixOptions},model:{value:t.client.suffix,callback:function(e){t.$set(t.client,"suffix",e)},expression:"client.suffix"}})],1),e("b-form-group",{attrs:{id:"address_1_group",label:"Address","label-for":"address_1","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"address_1",type:"text",required:""},model:{value:t.client.address_1,callback:function(e){t.$set(t.client,"address_1",e)},expression:"client.address_1"}})],1),e("b-form-group",{attrs:{id:"address_2_group",label:"Address 2","label-for":"address_2","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"address_2",type:"text"},model:{value:t.client.address_2,callback:function(e){t.$set(t.client,"address_2",e)},expression:"client.address_2"}})],1),e("b-form-group",{attrs:{id:"city_group",label:"City","label-for":"city","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"city",type:"text",required:""},model:{value:t.client.city,callback:function(e){t.$set(t.client,"city",e)},expression:"client.city"}})],1),e("b-form-group",{attrs:{id:"state_group",label:"State","label-for":"state","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-select",{attrs:{id:"state",options:t.stateOptions,required:""},model:{value:t.client.state,callback:function(e){t.$set(t.client,"state",e)},expression:"client.state"}})],1),e("b-form-group",{attrs:{id:"zip_code_group",label:"Zip code","label-for":"zip_code","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"zip_code",type:"text",required:""},model:{value:t.client.zip_code,callback:function(e){t.$set(t.client,"zip_code",e)},expression:"client.zip_code"}})],1),e("b-form-group",{attrs:{id:"phone_number_group",label:"Phone number","label-for":"phone_number","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"phone_number",type:"tel",required:""},model:{value:t.client.phone_number,callback:function(e){t.$set(t.client,"phone_number",e)},expression:"client.phone_number"}})],1),e("b-form-group",{attrs:{id:"email_group",label:"Email","label-for":"email","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"email",type:"email",required:""},model:{value:t.client.email,callback:function(e){t.$set(t.client,"email",e)},expression:"client.email"}})],1),e("b-form-group",{attrs:{id:"referrer_group",label:"Referrer","label-for":"referrer","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-select",{attrs:{id:"referrer",options:t.referrerOptions,required:""},model:{value:t.client.referrer_id,callback:function(e){t.$set(t.client,"referrer_id",e)},expression:"client.referrer_id"}})],1),e("div",{staticClass:"text-right"},[e("b-button",{attrs:{variant:"link"},on:{click:t.cancel}},[t._v("Cancel")]),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1)],1)],1)])])},vt=[],_t={name:"ClientForm",props:{id:Number},data(){return{client:{},referrerOptions:[],suffixOptions:["","Jr","Sr","II","III"],stateOptions:["AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]}},async created(){this.id&&this.getClient(),this.getReferrerOptions()},methods:{title(){return this.persisted()?"Edit Client":"Add Client"},persisted(){return this.client&&null!=this.client.id},getClient(){H.getClient(this.id).then(t=>{this.client=t})},getReferrerOptions(){H.getReferrers().then(t=>{t.forEach(t=>{this.referrerOptions.push({value:t.id,text:t.name})})})},cancel(t){t.preventDefault(),this.persisted()?this.$router.push({name:"client",params:{id:String(this.id)}}):this.$router.push({name:"clients"})},save(t){this.persisted()?(t.preventDefault(),H.updateClient(this.client.id,this.client).then(()=>{this.$store.commit("setAlertSuccess","Client updated successfully."),this.$router.push({name:"clients"})}).catch(t=>{this.$store.commit("setAlertError",lt("Client could not be saved",t))})):H.createClient(this.client).then(()=>{this.$store.commit("setAlertSuccess","Client created successfully."),this.$router.push({name:"clients"})}).catch(t=>{this.$store.commit("setAlertError",lt("Client could not be saved",t))})}}},wt=_t,kt=Object(f["a"])(wt,bt,vt,!1,null,"300e50a4",null),yt=kt.exports,Ct=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.isLoading?e("div",{staticClass:"row"},[e("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1):t._e(),t.isLoading?t._e():e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-lg-10"},[e("h1",[t._v(t._s(t.name(t.client)))])]),e("div",{staticClass:"col-lg-2 text-right"},[e("b-button",{attrs:{to:t.editLink,variant:"light"}},[t._v("Edit")]),e("b-button",{attrs:{variant:"danger"},on:{click:t.deleteClient}},[t._v("Delete")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("dl",[e("dt",[t._v("Address")]),e("dd",[e("address",{domProps:{innerHTML:t._s(t.address(t.client))}})]),e("dt",[t._v("Phone")]),e("dd",[t._v(t._s(t.client.phone_number))]),e("dt",[t._v("Email")]),e("dd",[t._v(t._s(t.client.email))])])])]),e("hr"),t.isLoading?t._e():e("div",{staticClass:"row my-3"},[t._m(0),e("div",{staticClass:"col-lg-1"},[e("b-button",{attrs:{variant:"primary",to:{name:"new_matter",params:{clientId:this.id}}}},[t._v("New")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("matter-table",{attrs:{matters:t.client.matters}})],1)])])},xt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-11"},[e("h3",[t._v("Matters")])])}],$t=function(){var t=this,e=t._self._c;return e("div",[e("b-input",{attrs:{type:"text",placeholder:"Type to filter"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("b-table",{attrs:{id:"matter-table",bordered:"",striped:"","show-empty":"",responsive:"",items:t.matters,fields:t.fields,"sort-by":"id",filter:t.filter,"filter-included-fields":["title","client_name","status","id"],"per-page":t.pageSize,"current-page":t.currentPage},on:{filtered:t.filtered},scopedSlots:t._u([{key:"cell(title)",fn:function(s){return[e("router-link",{attrs:{to:{name:"matter",params:{id:s.item.id}}}},[t._v(t._s(s.item.title))])]}},{key:"cell(client_id)",fn:function(s){return[e("router-link",{attrs:{to:{name:"client",params:{id:s.item.client_id}}}},[t._v(t._s(s.item.client_name))])]}}])}),e("div",{staticClass:"overflow-auto"},[e("b-pagination",{attrs:{"total-rows":t.rowCount,"per-page":t.pageSize,"aria-controls":"matter-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},Tt=[],St={name:"MatterTable",props:{matters:{type:Array,required:!0},pageSize:{type:Number,default:10}},data(){return{filter:null,fields:[{key:"id",label:"No."},"title",{key:"client_id",label:"Client"},"status",{key:"created",formatter:R},{key:"updated",formatter:R}],currentPage:1,rowCount:null}},updated(){null==this.rowCount&&(this.rowCount=this.matters.length)},methods:{filtered(t){this.rowCount=t.length,this.currentPage=1}}},At=St,Et=Object(f["a"])(At,$t,Tt,!1,null,"1d093202",null),Ot=Et.exports,Lt={name:"ClientView",components:{"matter-table":Ot},props:{id:{type:Number,required:!0}},data(){return{client:null,isLoading:!0}},created(){this.getClient()},computed:{editLink(){return null==this.client?"":{name:"edit_client",params:{id:this.client.id}}}},methods:{getClient(){H.getClient(this.id).then(t=>{this.client=t,this.isLoading=!1}).catch(t=>{if(404===t.statusCode)return this.$store.commit("setAlertError","Client could not be found."),void this.$router.push({name:"clients"});console.log(t.statusCode)})},deleteClient(){confirm("Are you sure? This action cannot be undone.")&&H.deleteClient(this.client.id).then(()=>{this.$router.push({name:"clients"}),this.$store.commit("setAlertSuccess","Client was succesfully deleted.")}).catch(t=>{this.$store.commit("setAlertError",lt("Client could not be deleted",t))})},name(t){if(null==t)return;let e=t.first_name+" ";return null!=t.middle_name&&(e+=t.middle_name+" "),e+=t.last_name,null!=t.suffix&&(e+=" "+t.suffix),e},address(t){if(null==t)return;let e=t.address_1+"<br/>";return null!=t.address_2&&(e+=t.address_2+"<br/>"),e+=t.city+", "+t.state+" "+t.zip_code,e}}},Pt=Lt,Nt=Object(f["a"])(Pt,Ct,xt,!1,null,"3accda4f",null),Rt=Nt.exports,Mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[t._m(0),e("div",{staticClass:"col-lg"},[e("b-button",{attrs:{variant:"primary",to:{name:"new_user"}}},[t._v("New")])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-input",{attrs:{type:"text",placeholder:"Type to filter"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("b-table",{attrs:{id:"user-table",bordered:"",striped:"","show-empty":"",responsive:"",items:t.users,fields:t.fields,"sort-by":"name",filter:t.filter,"filter-included-fields":["name","email"],"current-page":t.currentPage,"per-page":t.pageSize},on:{filtered:t.filtered},scopedSlots:t._u([{key:"cell(name)",fn:function(s){return[e("router-link",{attrs:{to:{name:"user",params:{id:s.item.id}}}},[t._v(t._s(s.item.name))])]}},{key:"cell(can_modify_users)",fn:function(t){return[t.item.can_modify_users?e("b-icon-check-circle-fill",{attrs:{variant:"success"}}):e("b-icon-x-square-fill",{attrs:{variant:"danger"}})]}}])}),e("div",{staticClass:"overflow-auto"},[e("b-pagination",{attrs:{"total-rows":t.rowCount,"per-page":t.pageSize,"aria-controls":"user-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)])])},Ut=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-11"},[e("h1",[t._v("Users")])])}],It={name:"UserList",data(){return{filter:null,fields:["name","email","can_modify_users",{key:"created",formatter:R},{key:"updated",formatter:R}],users:[],pageSize:10,currentPage:1,rowCount:null}},created(){u["a"].canModifyUsers()||(this.$router.push({name:"home"}),this.$store.commit("setAlertError","You do not have permission to access that page.")),this.loadUsers()},methods:{loadUsers(){H.getUsers().then(t=>{this.users=t,this.rowCount=t.length})},filtered(t){this.rowCount=t.length,this.currentPage=1}}},Dt=It,qt=Object(f["a"])(Dt,Mt,Ut,!1,null,"610c3568",null),jt=qt.exports,zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v(t._s(t.title()))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-form",{on:{submit:t.save}},[e("b-form-group",{attrs:{id:"name_group",label:"Name","label-for":"name","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"name",type:"text",required:""},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),e("b-form-group",{attrs:{id:"email_group",label:"Email","label-for":"email","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"email",type:"email",required:""},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),e("b-form-group",{attrs:{id:"password_group",label:"Password","label-for":"password","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"password",type:"password",required:!t.persisted()},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),e("b-form-group",{attrs:{id:"can_modify_users_group","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-checkbox",{attrs:{id:"can_modify_users"},model:{value:t.user.can_modify_users,callback:function(e){t.$set(t.user,"can_modify_users",e)},expression:"user.can_modify_users"}},[t._v(" Can modify users ")])],1),e("div",{staticClass:"text-right"},[e("b-button",{attrs:{variant:"link"},on:{click:t.cancel}},[t._v("Cancel")]),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1)],1)],1)])])},Wt=[],Bt={name:"UserForm",props:{id:Number},data(){return{user:{}}},created(){if(!u["a"].canModifyUsers())return this.$router.push({name:"home"}),void this.$store.commit("setAlertError","You do not have permission to access that page.");this.id&&this.getUser()},methods:{title(){return this.persisted()?"Edit User":"Add User"},persisted(){return null!=this.user.id},getUser(){H.getUser(this.id).then(t=>{this.user=t}).catch(t=>{if(404===t.statusCode)return this.$store.commit("setAlertError","User not found."),void this.$router.push({name:"users"});console.log(t.statusCode)})},cancel(t){t.preventDefault(),this.persisted()?this.$router.push({name:"user",params:{id:String(this.id)}}):this.$router.push({name:"users"})},save(t){t.preventDefault(),this.persisted()?H.updateUser(this.id,this.user).then(()=>{this.$store.commit("setAlertSuccess","User updated successfully."),this.$router.push({name:"users"})}).catch(t=>{this.$store.commit("setAlertError",lt("User could not be saved",t))}):H.createUser(this.user).then(()=>{this.$store.commit("setAlertSuccess","User created successfully."),this.$router.push({name:"users"})}).catch(t=>{this.$store.commit("setAlertError",lt("User could not be saved",t))})}}},Ft=Bt,Vt=Object(f["a"])(Ft,zt,Wt,!1,null,"db5196bc",null),Ht=Vt.exports,Yt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.isLoading?e("div",{staticClass:"row"},[e("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1):t._e(),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-10"},[e("h1",[t._v(t._s(t.user.name))])]),e("div",{staticClass:"col-lg-2"},[e("b-button",{attrs:{to:{name:"edit_user",params:{id:t.user.id}},variant:"light"}},[t._v("Edit")]),e("b-button",{attrs:{variant:"danger"},on:{click:t.deleteUser}},[t._v("Delete")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("p",[t._v(t._s(t.user.email))])])]),e("hr"),t._m(0),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-lg"},[e("task-table",{attrs:{tasks:t.tasks,"exclude-staff":""}})],1)])])},Jt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-lg"},[e("h3",[t._v("Tasks")])])])}],Kt={name:"UserView",components:{"task-table":X},props:{id:{type:Number,required:!0}},data(){return{user:null,isLoading:!0,tasks:[]}},created(){u["a"].canModifyUsers()||(this.$router.push({name:"home"}),this.$store.commit("setAlertError","You do not have permission to access that page.")),this.getUser()},methods:{getUser(){H.getUser(this.id).then(t=>{this.user=t,this.isLoading=!1,this.tasks=t.tasks}).catch(t=>{404===t?(this.$router.push({name:"users"}),this.$store.commit("setAlertError","User not found.")):console.log(t)})},deleteUser(){confirm("Are you sure? This action cannot be undone.")&&H.deleteUser(this.id).then(()=>{this.$router.push({name:"users"}),this.$store.commit("setAlertSuccess","User was successfully deleted.")}).catch(t=>{this.$store.commit("setAlertError",lt("User could not be deleted",t))})}}},Zt=Kt,Gt=Object(f["a"])(Zt,Yt,Jt,!1,null,"500b0a05",null),Xt=Gt.exports,Qt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[t._m(0),e("div",{staticClass:"col-lg"},[e("b-button",{attrs:{variant:"primary",to:{name:"new_referrer"}}},[t._v("New")])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("div",[e("b-input",{attrs:{type:"text",placeholder:"Type to filter"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("b-table",{attrs:{id:"referrer-table",bordered:"",striped:"","show-empty":"",responsive:"",items:t.referrers,fields:t.fields,"sort-by":"name",filter:t.filter,"filter-included-fields":["name"],"per-page":t.pageSize,"current-page":t.currentPage},on:{filtered:t.filtered},scopedSlots:t._u([{key:"cell(name)",fn:function(s){return[e("router-link",{attrs:{to:{name:"referrer",params:{id:s.item.id}}}},[t._v(t._s(s.item.name))])]}}])}),e("div",{staticClass:"overflow-auto"},[e("b-pagination",{attrs:{"total-rows":t.rowCount,"per-page":t.pageSize,"aria-controls":"referrer-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)])])])},te=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-11"},[e("h1",[t._v("Referrers")])])}],ee={name:"ReferrerList",data(){return{filter:null,fields:["name",{key:"created",formatter:R},{key:"updated",formatter:R}],referrers:[],currentPage:1,rowCount:null,pageSize:10}},async created(){this.loadReferrers()},methods:{loadReferrers(){H.getReferrers().then(t=>{this.referrers=t,this.rowCount=this.referrers.length})},filtered(t){this.rowCount=t.length,this.currentPage=1}}},se=ee,re=Object(f["a"])(se,Qt,te,!1,null,"0878b733",null),ae=re.exports,ie=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v(t._s(t.title()))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-form",{on:{submit:t.save}},[e("b-form-group",{attrs:{id:"name_group",label:"Name","label-for":"name","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"name",type:"text",required:""},model:{value:t.referrer.name,callback:function(e){t.$set(t.referrer,"name",e)},expression:"referrer.name"}})],1),e("div",{staticClass:"text-right"},[e("b-button",{attrs:{variant:"link"},on:{click:t.cancel}},[t._v("Cancel")]),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1)],1)],1)])])},oe=[],ne={name:"ReferrerForm",props:{id:Number},data(){return{referrer:{}}},created(){this.id&&this.getReferrer()},methods:{title(){return this.persisted()?"Edit Referrer":"Add Referrer"},persisted(){return null!=this.id},getReferrer(){H.getReferrer(this.id).then(t=>{this.referrer=t}).catch(t=>{if(404===t)return this.$store.commit("setAlertError","Referrer not found."),void this.$router.push({name:"referrers"});console.log(t)})},cancel(t){t.preventDefault(),this.persisted()?this.$router.push({name:"referrer",params:{id:String(this.id)}}):this.$router.push({name:"referrers"})},save(t){t.preventDefault(),this.persisted()?H.updateReferrer(this.id,this.referrer).then(()=>{this.$store.commit("setAlertSuccess","Referrer updated successfully."),this.$router.push({name:"referrers"})}).catch(t=>{this.$store.commit("setAlertError",lt("Referrer could not be saved",t))}):H.createReferrer(this.referrer).then(()=>{this.$store.commit("setAlertSuccess","Referrer created successfully."),this.$router.push({name:"referrers"})}).catch(t=>{this.$store.commit("setAlertError",lt("Referrer could not be saved",t))})}}},le=ne,ce=Object(f["a"])(le,ie,oe,!1,null,"4fab9780",null),de=ce.exports,ue=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.isLoading?e("div",{staticClass:"row"},[e("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1):t._e(),t.isLoading?t._e():e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-lg-10"},[e("h1",[t._v(t._s(t.referrer.name))])]),e("div",{staticClass:"col-lg-2 text-right"},[e("b-button",{attrs:{to:{name:"edit_referrer",params:{id:t.referrer.id}},variant:"light"}},[t._v("Edit")]),e("b-button",{attrs:{variant:"danger"},on:{click:t.deleteReferrer}},[t._v("Delete")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("p",[t._v(t._s(t.referrer.email))])])]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("h3",[t._v("Clients from this referrer")]),e("client-table",{attrs:{clients:t.referrer.clients}})],1)])])},pe=[],me={name:"ReferrerView",components:{"client-table":pt},props:{id:{type:Number,required:!0}},data(){return{referrer:null,isLoading:!0}},async created(){this.getReferrer()},methods:{getReferrer(){H.getReferrer(this.id).then(t=>{this.referrer=t,this.isLoading=!1}).catch(t=>{404===t?(this.$store.commit("setAlertError","Referrer not found."),this.$router.push({name:"referrers"})):console.log(t)})},deleteReferrer(){confirm("Are you sure? This action cannot be undone.")&&H.deleteReferrer(this.id).then(()=>{this.$store.commit("setAlertSuccess","Referrer deleted successfully."),this.$router.push({name:"referrers"})}).catch(t=>{this.$store.commit("setAlertError",lt("Referrer could not be deleted",t))})}}},fe=me,he=Object(f["a"])(fe,ue,pe,!1,null,"57a35072",null),ge=he.exports,be=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-form",{on:{submit:t.login}},[e("b-form-group",{attrs:{id:"email_group",label:"Email","label-for":"email","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"email",type:"text",required:""},model:{value:t.attempt.email,callback:function(e){t.$set(t.attempt,"email",e)},expression:"attempt.email"}})],1),e("b-form-group",{attrs:{id:"password_group",label:"Password","label-for":"password","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:t.attempt.password,callback:function(e){t.$set(t.attempt,"password",e)},expression:"attempt.password"}})],1),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)])])},ve=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v("Login")])])])}],_e={name:"Login",data(){return{attempt:{}}},methods:{login(t){t.preventDefault(),this.error="",H.login(this.attempt.email,this.attempt.password).then(t=>{u["a"].login(t.token,t.user),this.$store.commit("setAlertSuccess","Login was successful."),this.$router.push({name:"home"})}).catch(t=>{401===t?this.$store.commit("setAlertError","Invalid email or password."):console.log(t)})}}},we=_e,ke=Object(f["a"])(we,be,ve,!1,null,"559d687d",null),ye=ke.exports,Ce=s("c0d6"),xe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[t._m(0),e("div",{staticClass:"col-lg"},[e("b-button",{attrs:{variant:"primary",to:{name:"new_matter"}}},[t._v("New")])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("matter-table",{attrs:{matters:t.matters}})],1)])])},$e=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-11"},[e("h1",[t._v("Matters")])])}],Te={name:"MatterList",components:{"matter-table":Ot},data(){return{matters:[]}},async created(){this.getMatters()},methods:{getMatters(){H.getMatters().then(t=>{this.matters=t}).catch(()=>{this.$store.commit("setAlertError","Error retrieving list of matters")})}}},Se=Te,Ae=Object(f["a"])(Se,xe,$e,!1,null,"786ca561",null),Ee=Ae.exports,Oe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v(t._s(t.title()))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-form",{on:{submit:t.save}},[e("b-form-group",{attrs:{id:"title_group",label:"Title","label-for":"title","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"title",type:"text",required:""},model:{value:t.matter.title,callback:function(e){t.$set(t.matter,"title",e)},expression:"matter.title"}})],1),e("b-form-group",{attrs:{id:"client_group",label:"Client","label-for":"client","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-select",{attrs:{id:"client",options:t.clientOptions,required:""},model:{value:t.matter.client_id,callback:function(e){t.$set(t.matter,"client_id",e)},expression:"matter.client_id"}})],1),e("b-form-group",{attrs:{id:"status_group",label:"Status","label-for":"status","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-select",{attrs:{id:"status",options:t.statusOptions,required:""},model:{value:t.matter.status,callback:function(e){t.$set(t.matter,"status",e)},expression:"matter.status"}})],1),e("b-form-group",{attrs:{id:"workflow_group",label:"Workflow","label-for":"workflow","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-select",{attrs:{id:"workflow",options:t.workflowOptions},model:{value:t.matter.workflow_id,callback:function(e){t.$set(t.matter,"workflow_id",e)},expression:"matter.workflow_id"}})],1),e("div",{staticClass:"text-right"},[e("b-button",{attrs:{variant:"link"},on:{click:t.cancel}},[t._v("Cancel")]),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1)],1)],1)])])},Le=[],Pe={name:"MatterForm",props:{id:Number,clientId:Number},data(){return{matter:{},clientOptions:[],workflowOptions:[],statusOptions:["Prospect","Open","Closed"]}},async created(){this.id&&this.getMatter(),this.getClientOptions(),this.getWorkflowOptions(),this.clientId&&(this.matter.client_id=this.clientId)},methods:{getMatter(){H.getMatter(this.id).then(t=>{this.matter=t}).catch(t=>{if(404===t)return this.$router.push({name:"matters"}),void this.$store.commit("setAlertError","Matter not found.");console.log(t)})},getClientOptions(){H.getClients().then(t=>{t.forEach(t=>{this.clientOptions.push({value:t.id,text:nt(t)})})}).catch(()=>{this.$store.commit("setAlertError","Error loading client options.")})},getWorkflowOptions(){this.workflowOptions=[{value:null,text:"-- none --"}],H.getWorkflows().then(t=>{t.forEach(t=>{this.workflowOptions.push({value:t.id,text:t.name})})}).catch(()=>{this.$store.commit("setAlertError","Error loading client options.")})},title(){return this.persisted()?"Edit Matter":"Add Matter"},persisted(){return null!=this.id},cancel(t){t.preventDefault(),this.persisted()?this.$router.push({name:"matter",params:{id:String(this.id)}}):this.$router.push({name:"matters"})},save(t){t.preventDefault(),this.persisted()?H.updateMatter(this.id,this.matter).then(()=>{this.$router.push({name:"matter",params:{id:String(this.id)}}),this.$store.commit("setAlertSuccess","Matter updated successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Matter could not be saved",t))}):H.createMatter(this.matter).then(()=>{this.$router.push({name:"matters"}),this.$store.commit("setAlertSuccess","Matter created successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Matter could not be saved",t))})}}},Ne=Pe,Re=Object(f["a"])(Ne,Oe,Le,!1,null,"bacfb0f6",null),Me=Re.exports,Ue=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.isLoading?e("div",{staticClass:"row"},[e("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1):t._e(),t.isLoading?t._e():e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-lg-10"},[e("h1",[t._v(t._s(t.matter.title))])]),e("div",{staticClass:"col-lg-2 text-right"},[e("b-button",{attrs:{to:{name:"edit_matter",params:{id:t.matter.id}},variant:"light"}},[t._v("Edit")]),e("b-button",{attrs:{variant:"danger"},on:{click:t.deleteMatter}},[t._v("Delete")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("dl",[e("dt",[t._v("Client")]),e("dd",[t._v(t._s(t.matter.client_name))]),e("dt",[t._v("Status")]),e("dd",[t._v(t._s(t.matter.status))]),e("dt",[t._v("Workflow")]),e("dd",[t._v(t._s(t.matter.workflow_name||"None"))]),e("dt",[t._v("Step")]),e("dd",[t._v(" "+t._s(t.matter.step_name||"None")+" "),t.matter.next_step_id?e("a",{attrs:{href:"#"},on:{click:t.advanceToNextStep}},[t._v("Advance to next step")]):t._e()])])])]),e("hr"),t.isLoading?t._e():e("div",{staticClass:"row my-4"},[e("div",{staticClass:"col-lg-11"},[e("h3",[t._v(" Transactions "),e("small",{staticClass:"text-muted small"},[t._v(" Balance: "+t._s(t.currentBalance())+" ")])])]),e("div",{staticClass:"col-lg-1"},[e("b-button",{attrs:{variant:"primary",to:{name:"new_transaction",params:{matterId:this.id}}}},[t._v("New")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("transaction-table",{attrs:{transactions:t.matter.transactions,"exclude-matter":""}})],1)]),e("hr"),t.isLoading?t._e():e("div",{staticClass:"row my-4"},[t._m(0),e("div",{staticClass:"col-lg-1"},[e("b-button",{attrs:{variant:"primary",to:{name:"new_appointment",params:{matterId:this.id}}}},[t._v("New")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("appointment-table",{attrs:{appointments:t.matter.appointments,"exclude-matter":""}})],1)]),e("hr"),t.isLoading?t._e():e("div",{staticClass:"row my-4"},[t._m(1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("task-table",{attrs:{tasks:t.matter.tasks,"exclude-matter":""}})],1)]),e("hr"),t.isLoading?t._e():e("div",{staticClass:"row my-4"},[t._m(2),e("div",{staticClass:"col-lg-1"},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-note-modal",modifiers:{"add-note-modal":!0}}],attrs:{variant:"primary"}},[t._v("Add")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[0===t.matter.notes.length?e("div",[e("b-card",[e("b-card-text",[t._v("No notes yet :/")])],1)],1):t._e(),t._l(t.matter.notes,(function(s){return e("b-card",{key:s.id,scopedSlots:t._u([{key:"footer",fn:function(){return[t._v(" "+t._s(s.user_name)+" ("+t._s(s.user_email)+"), "+t._s(t.toLocalTime(s.created))+" ")]},proxy:!0}],null,!0)},[e("b-card-text",[t._v(t._s(s.text))])],1)}))],2)]),e("b-modal",{attrs:{id:"add-note-modal",title:"Add note","ok-title":"Save"},on:{ok:t.addNote}},[e("b-form",[e("b-form-group",{attrs:{id:"text_group"}},[e("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter your note here",rows:"5","max-rows":"5",required:""},model:{value:t.note.text,callback:function(e){t.$set(t.note,"text",e)},expression:"note.text"}})],1)],1)],1)],1)},Ie=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-11"},[e("h3",[t._v(" Appointments ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg"},[e("h3",[t._v(" Tasks ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-11"},[e("h3",[t._v("Notes")])])}],De=function(){var t=this,e=t._self._c;return e("div",[e("b-input",{attrs:{type:"text",placeholder:"Type to filter"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("b-table",{attrs:{id:"transaction-table",bordered:"",striped:"","show-empty":"",responsive:"",items:t.transactions,fields:t.fields,"sort-by":"id",filter:t.filter,"filter-included-fields":["matter_title","client_name","description","amount"],"per-page":t.pageSize,"current-page":t.currentPage},on:{filtered:t.filtered},scopedSlots:t._u([{key:"cell(id)",fn:function(s){return[e("router-link",{attrs:{to:{name:"transaction",params:{id:s.item.id}}}},[t._v(t._s(s.item.id))])]}},{key:"cell(matter)",fn:function(s){return[e("router-link",{attrs:{to:{name:"matter",params:{id:s.item.matter_id}}}},[t._v(t._s(s.item.client_name)+" - "+t._s(s.item.matter_title))])]}}])}),e("div",{staticClass:"overflow-auto"},[e("b-pagination",{attrs:{"total-rows":t.rowCount,"per-page":t.pageSize,"aria-controls":"transaction-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},qe=[];const je=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});var ze={name:"TransactionTable",props:{transactions:{type:Array,required:!0},excludeMatter:{type:Boolean,default:!1},pageSize:{type:Number,default:10}},data(){return{filter:null,rowCount:null,currentPage:1}},updated(){null==this.rowCount&&(this.rowCount=this.transactions.length)},computed:{fields(){let t=[{key:"id",label:"ID"},"description",{key:"amount",formatter:this.padCurrency},{key:"created",label:"Date",formatter:R}];return this.excludeMatter||t.splice(1,0,"matter"),t}},methods:{padCurrency(t){return je.format(Number(t))},filtered(t){this.rowCount=t.length,this.currentPage=1}}},We=ze,Be=Object(f["a"])(We,De,qe,!1,null,"0c17d5cc",null),Fe=Be.exports,Ve={name:"MatterView",components:{"appointment-table":j,"task-table":X,"transaction-table":Fe},props:{id:{type:Number,required:!0}},data(){return{matter:null,isLoading:!0,note:{matter_id:this.id,user_email:this.$store.getters.getUserEmail,user_name:this.$store.getters.getUserName}}},async created(){this.getMatter()},methods:{toLocalTime:R,getMatter(){H.getMatter(this.id).then(t=>{this.matter=t,this.isLoading=!1}).catch(t=>{404===t?(this.$router.push({name:"matters"}),this.$store.commit("setAlertError","Matter not found.")):console.log(t)})},addNote(){let t={...this.note};t.matter_id=this.id,t.user_email=this.$store.getters.getUserEmail,t.user_name=this.$store.getters.getUserName,H.createNote(t).then(t=>{this.matter.notes.push(t)})},currentBalance(){let t=0;return this.matter.transactions.forEach(e=>{t+=Number(e.amount)}),je.format(t)},deleteMatter(){confirm("Are you sure? This action cannot be undone.")&&H.deleteMatter(this.id).then(()=>{this.$router.push({name:"matters"}),this.$store.commit("setAlertSuccess","Matter deleted successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Matter could not be deleted",t))})},advanceToNextStep(){this.matter.next_step_id?N.a.some(this.matter.tasks,{status:"Incomplete"})&&confirm("Are you sure? You still have incomplete tasks.")&&(this.matter.step_id=this.matter.next_step_id,H.updateMatter(this.id,this.matter).then(()=>{this.getMatter(),this.$store.commit("setAlertSuccess","Matter moved to next step")}).catch(()=>{this.$store.commit("setAlertError","Matter could not be moved to next step")})):this.$store.commit("setAlertError","No next step defined for this matter's workflow")}}},He=Ve,Ye=(s("bc48"),s("c247"),Object(f["a"])(He,Ue,Ie,!1,null,"6879a534",null)),Je=Ye.exports,Ke=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[t._m(0),e("div",{staticClass:"col-lg"},[e("b-button",{attrs:{variant:"primary",to:{name:"new_transaction"}}},[t._v("New")])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("transaction-table",{attrs:{transactions:t.transactions}})],1)])])},Ze=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-11"},[e("h1",[t._v("Transactions")])])}],Ge={name:"TransactionList",components:{"transaction-table":Fe},data(){return{transactions:[]}},async created(){this.getTransactions()},methods:{getTransactions(){H.getTransactions().then(t=>{this.transactions=t}).catch(()=>{this.$store.commit("setAlertError","Error retrieving list of transactions")})}}},Xe=Ge,Qe=Object(f["a"])(Xe,Ke,Ze,!1,null,"212b03b4",null),ts=Qe.exports,es=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v(t._s(t.title()))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-form",{on:{submit:t.save}},[e("b-form-group",{attrs:{id:"description_group",label:"Description","label-for":"description","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"description",type:"text",required:""},model:{value:t.transaction.description,callback:function(e){t.$set(t.transaction,"description",e)},expression:"transaction.description"}})],1),e("b-form-group",{attrs:{id:"matter_id_group",label:"Matter","label-for":"matter_id","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-select",{attrs:{id:"matter_id",options:t.matterOptions,required:""},model:{value:t.transaction.matter_id,callback:function(e){t.$set(t.transaction,"matter_id",e)},expression:"transaction.matter_id"}})],1),e("b-form-group",{attrs:{id:"amount_group",label:"Amount","label-for":"amount","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"amount",type:"number",step:"0.01",value:"0.00",required:""},model:{value:t.transaction.amount,callback:function(e){t.$set(t.transaction,"amount",e)},expression:"transaction.amount"}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"amountHelp"}},[t._v(" Use positive numbers to indicate charges, and negative numbers to indicate payments. ")])],1),e("div",{staticClass:"text-right"},[e("b-button",{attrs:{variant:"link"},on:{click:t.cancel}},[t._v("Cancel")]),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1)],1)],1)])])},ss=[],rs={name:"TransactionForm",props:{id:Number,matterId:Number},data(){return{transaction:{},matterOptions:[]}},async created(){this.id&&this.getTransaction(),this.getMatterOptions(),this.matterId&&(this.transaction.matter_id=this.matterId)},methods:{getTransaction(){H.getTransaction(this.id).then(t=>{this.transaction=t}).catch(t=>{404===t?(this.$router.push({name:"transactions"}),this.$store.commit("setAlertError","Transaction not found.")):console.log(t)})},getMatterOptions(){H.getMatters().then(t=>{t.forEach(t=>{this.matterOptions.push({value:t.id,text:t.client_name+" "+t.title})})}).catch(()=>{this.$store.commit("setAlertError","Error loading matter options")})},title(){return this.persisted()?"Edit Transaction":"Add Transaction"},persisted(){return null!=this.id},cancel(t){t.preventDefault(),this.persisted()?this.$router.push({name:"transaction",params:{id:String(this.id)}}):this.$router.push({name:"transactions"})},save(t){t.preventDefault(),this.transaction.amount=Number(this.transaction.amount),this.persisted()?H.updateTransaction(this.id,this.transaction).then(()=>{this.$router.push({name:"transactions"}),this.$store.commit("setAlertSuccess","Transaction updated successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Transaction could not be saved",t))}):H.createTransaction(this.transaction).then(()=>{this.$router.push({name:"transactions"}),this.$store.commit("setAlertSuccess","Transaction created successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Transaction could not be saved",t))})}}},as=rs,is=Object(f["a"])(as,es,ss,!1,null,"24b22205",null),os=is.exports,ns=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.isLoading?e("div",{staticClass:"row"},[e("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1):t._e(),t.isLoading?t._e():e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg-10"},[e("h1",[t._v("Transaction #"+t._s(t.transaction.id))])]),e("div",{staticClass:"col-lg-2 text-right"},[e("b-button",{attrs:{to:{name:"edit_transaction",params:{id:t.transaction.id}},variant:"light"}},[t._v("Edit")]),e("b-button",{attrs:{variant:"danger"},on:{click:t.deleteTransaction}},[t._v("Delete")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("dl",[e("dt",[t._v("Description")]),e("dd",[t._v(t._s(t.transaction.description))]),e("dt",[t._v("Amount")]),e("dd",[t._v(t._s(t.formatMoney(t.transaction.amount)))]),e("dt",[t._v("Created")]),e("dd",[t._v(t._s(t.toLocalTime(t.transaction.created)))]),e("dt",[t._v("Updated")]),e("dd",[t._v(t._s(t.toLocalTime(t.transaction.updated)))])])])])])},ls=[],cs={name:"TransactionView",props:{id:{type:Number,required:!0}},data(){return{transaction:null,isLoading:!0}},async created(){this.getTransaction()},methods:{toLocalTime:R,formatMoney(t){return je.format(t)},getTransaction(){H.getTransaction(this.id).then(t=>{this.transaction=t,this.isLoading=!1}).catch(t=>{404===t?(this.$router.push({name:"transactions"}),this.$store.commit("setAlertError","Transaction not found.")):console.log(t)})},deleteTransaction(){confirm("Are you sure? This action cannot be undone.")&&H.deleteTransaction(this.id).then(()=>{this.$router.push({name:"transactions"}),this.$store.commit("setAlertSuccess","Transaction deleted successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Transaction could not be deleted",t))})}}},ds=cs,us=Object(f["a"])(ds,ns,ls,!1,null,"36e13468",null),ps=us.exports,ms=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[t._m(0),e("div",{staticClass:"col-lg"},[e("b-button",{attrs:{variant:"primary",to:{name:"new_appointment"}}},[t._v("New")])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("appointment-table",{attrs:{appointments:t.appointments}})],1)])])},fs=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-11"},[e("h1",[t._v("Appointments")])])}],hs={name:"AppointmentList",components:{"appointment-table":j},data(){return{appointments:[]}},async created(){this.getAppointments()},methods:{getAppointments(){H.getAppointments().then(t=>{this.appointments=t}).catch(()=>{this.$store.commit("setAlertError","Error retrieving list of appointments")})}}},gs=hs,bs=Object(f["a"])(gs,ms,fs,!1,null,"3e5cc7bf",null),vs=bs.exports,_s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v(t._s(t.title()))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-form",{on:{submit:t.save}},[e("b-form-group",{attrs:{id:"title_group",label:"Title","label-for":"title","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"title",type:"text",required:""},model:{value:t.appointment.title,callback:function(e){t.$set(t.appointment,"title",e)},expression:"appointment.title"}})],1),e("b-form-group",{attrs:{id:"matter_id_group",label:"Matter","label-for":"matter_id","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-select",{attrs:{id:"matter_id",options:t.matterOptions,required:""},model:{value:t.appointment.matter_id,callback:function(e){t.$set(t.appointment,"matter_id",e)},expression:"appointment.matter_id"}})],1),e("b-form-group",{attrs:{id:"staff_id_group",label:"Staff","label-for":"staff_id","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-select",{attrs:{id:"staff_id",options:t.staffOptions,required:""},model:{value:t.appointment.staff_id,callback:function(e){t.$set(t.appointment,"staff_id",e)},expression:"appointment.staff_id"}})],1),e("b-form-group",{attrs:{id:"description_group",label:"Description","label-for":"description","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-textarea",{attrs:{id:"textarea",rows:"5","max-rows":"5"},model:{value:t.appointment.description,callback:function(e){t.$set(t.appointment,"description",e)},expression:"appointment.description"}})],1),e("b-form-group",{attrs:{id:"location_group",label:"Location","label-for":"location","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"location",type:"text",required:""},model:{value:t.appointment.location,callback:function(e){t.$set(t.appointment,"location",e)},expression:"appointment.location"}})],1),e("b-form-group",{attrs:{id:"start_date_group",label:"Start Date","label-for":"startDate","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-datepicker",{attrs:{id:"startDate",required:""},model:{value:t.appointment.startDate,callback:function(e){t.$set(t.appointment,"startDate",e)},expression:"appointment.startDate"}})],1),e("b-form-group",{attrs:{id:"start_time_group",label:"Start Time","label-for":"startTime","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-timepicker",{attrs:{id:"startTime",locale:"en","calendar-width":"300",required:""},model:{value:t.appointment.startTime,callback:function(e){t.$set(t.appointment,"startTime",e)},expression:"appointment.startTime"}})],1),e("b-form-group",{attrs:{id:"end_date_group",label:"End Date","label-for":"endDate","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-datepicker",{attrs:{id:"endDate",required:""},model:{value:t.appointment.endDate,callback:function(e){t.$set(t.appointment,"endDate",e)},expression:"appointment.endDate"}})],1),e("b-form-group",{attrs:{id:"end_time_group",label:"End Time","label-for":"endTime","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-timepicker",{attrs:{id:"endTime",locale:"en","calendar-width":"300",required:""},model:{value:t.appointment.endTime,callback:function(e){t.$set(t.appointment,"endTime",e)},expression:"appointment.endTime"}})],1),e("div",{staticClass:"text-right"},[e("b-button",{attrs:{variant:"link"},on:{click:t.cancel}},[t._v("Cancel")]),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1)],1)],1)])])},ws=[],ks={name:"AppointmentForm",props:{id:Number,matterId:Number,staffId:Number},data(){return{appointment:{},matterOptions:[],staffOptions:[]}},async created(){this.id&&this.getAppointment(),this.getMatterOptions(),this.getStaffOptions(),this.matterId&&(this.appointment.matter_id=this.matterId),this.staffId&&(this.appointment.staff_if=this.staffId)},methods:{title(){return this.persisted()?"Edit Appointment":"New Appointment"},persisted(){return null!=this.id},getAppointment(){H.getAppointment(this.id).then(t=>{this.appointment=t,[this.appointment.startDate,this.appointment.startTime]=M(this.appointment.start),[this.appointment.endDate,this.appointment.endTime]=M(this.appointment.end)}).catch(t=>{404===t?(this.$router.push({name:"appointments"}),this.$store.commit("setAlertError","Appointment not found.")):console.log(t)})},getMatterOptions(){H.getMatters().then(t=>{t.forEach(t=>{this.matterOptions.push({value:t.id,text:t.client_name+" "+t.title})})}).catch(()=>{this.$store.commit("setAlertError","Error loading matter options")})},getStaffOptions(){H.getUsers().then(t=>{t.forEach(t=>{this.staffOptions.push({value:t.id,text:t.name})})}).catch(()=>{this.$store.commit("setAlertError","Error loading staff options")})},cancel(t){t.preventDefault(),this.persisted()?this.$router.push({name:"appointment",params:{id:String(this.id)}}):this.$router.push({name:"appointments"})},save(t){t.preventDefault(),this.appointment.start=U(this.appointment.startDate+"T"+N.a.padStart(this.appointment.startTime,8,"0")),this.appointment.end=U(this.appointment.endDate+"T"+N.a.padStart(this.appointment.endTime,8,"0")),this.persisted()?H.updateAppointment(this.id,N.a.omit(this.appointment,["startDate","endDate","startTime","endTime"])).then(()=>{this.$router.push({name:"appointments"}),this.$store.commit("setAlertSuccess","Appointment updated successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Appointment could not be saved",t))}):H.createAppointment(N.a.omit(this.appointment,["startDate","endDate","startTime","endTime"])).then(()=>{this.$router.push({name:"appointments"}),this.$store.commit("setAlertSuccess","Appointment created successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Appointment could not be saved",t))})}}},ys=ks,Cs=Object(f["a"])(ys,_s,ws,!1,null,"41e13a8e",null),xs=Cs.exports,$s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.isLoading?e("div",{staticClass:"row"},[e("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1):t._e(),t.isLoading?t._e():e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg-10"},[e("h1",[t._v(t._s(t.appointment.title))])]),e("div",{staticClass:"col-lg-2 text-right"},[e("b-button",{attrs:{to:{name:"edit_appointment",params:{id:t.appointment.id}},variant:"light"}},[t._v("Edit")]),e("b-button",{attrs:{variant:"danger"},on:{click:t.deleteAppointment}},[t._v("Delete")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("dl",[e("dt",[t._v("Matter")]),e("dd",[t._v(t._s(t.appointment.client_name)+" - "+t._s(t.appointment.matter_title))]),e("dt",[t._v("Staff")]),e("dd",[t._v(t._s(t.appointment.staff_name))]),e("dt",[t._v("Start")]),e("dd",[t._v(t._s(t.toLocalTime(t.appointment.start)))]),e("dt",[t._v("End")]),e("dd",[t._v(t._s(t.toLocalTime(t.appointment.end)))]),e("dt",[t._v("Description")]),e("dd",[t._v(t._s(t.appointment.description))]),e("dt",[t._v("Location")]),e("dd",[t._v(t._s(t.appointment.location))]),e("dt",[t._v("Created")]),e("dd",[t._v(t._s(t.toLocalTime(t.appointment.created)))]),e("dt",[t._v("Updated")]),e("dd",[t._v(t._s(t.toLocalTime(t.appointment.updated)))])])])])])},Ts=[],Ss={name:"AppointmentView",props:{id:{type:Number,required:!0}},data(){return{appointment:null,isLoading:!0}},async created(){this.getAppointment()},methods:{toLocalTime:R,getAppointment(){H.getAppointment(this.id).then(t=>{this.appointment=t,this.isLoading=!1}).catch(t=>{404===t?(this.$router.push({name:"appointments"}),this.$store.commit("setAlertError","Appointment not found.")):console.log(t)})},deleteAppointment(){confirm("Are you sure? This action cannot be undone.")&&H.deleteAppointment(this.id).then(()=>{this.$router.push({name:"appointments"}),this.$store.commit("setAlertSuccess","Appointment deleted successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Appointment could not be deleted",t))})}}},As=Ss,Es=Object(f["a"])(As,$s,Ts,!1,null,"762e10fa",null),Os=Es.exports,Ls=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[t._m(0),e("div",{staticClass:"col-lg"},[e("b-button",{attrs:{variant:"primary",to:{name:"new_workflow"}}},[t._v("New")])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("workflow-table",{attrs:{workflows:t.workflows}})],1)])])},Ps=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-11"},[e("h1",[t._v("Workflows")])])}],Ns=function(){var t=this,e=t._self._c;return e("div",[e("b-input",{attrs:{type:"text",placeholder:"Type to filter"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("b-table",{attrs:{id:"workflow-table",bordered:"",striped:"","show-empty":"",responsive:"",items:t.workflows,fields:t.fields,"sort-by":"name",filter:t.filter,"filter-included-fields":["name","description"],"per-page":t.pageSize,"current-page":t.currentPage},on:{filtered:t.filtered},scopedSlots:t._u([{key:"cell(name)",fn:function(s){return[e("router-link",{attrs:{to:{name:"workflow",params:{id:s.item.id}}}},[t._v(t._s(s.item.name))])]}}])}),e("div",{staticClass:"overflow-auto"},[e("b-pagination",{attrs:{"total-rows":t.rowCount,"per-page":t.pageSize,"aria-controls":"workflow-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},Rs=[],Ms={name:"WorkflowTable",props:{workflows:{type:Array,required:!0},pageSize:{type:Number,default:10}},data(){return{filter:null,fields:["name","description",{key:"created",formatter:R},{key:"updated",formatter:R}],currentPage:1,rowCount:null}},updated(){null==this.rowCount&&(this.rowCount=this.workflows.length)},methods:{filtered(t){this.rowCount=t.length,this.currentPage=1}}},Us=Ms,Is=Object(f["a"])(Us,Ns,Rs,!1,null,"6e96db19",null),Ds=Is.exports,qs={name:"WorkflowList",components:{"workflow-table":Ds},data(){return{workflows:[]}},async created(){this.getWorkflows()},methods:{getWorkflows(){H.getWorkflows().then(t=>{this.workflows=t}).catch(()=>{this.$store.commit("setAlertError","Error retrieving list of workflows")})}}},js=qs,zs=Object(f["a"])(js,Ls,Ps,!1,null,"3cb2a95f",null),Ws=zs.exports,Bs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v(t._s(t.title()))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-form",{on:{submit:t.save}},[e("b-form-group",{attrs:{id:"name_group",label:"Name","label-for":"name","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"name",type:"text",required:""},model:{value:t.workflow.name,callback:function(e){t.$set(t.workflow,"name",e)},expression:"workflow.name"}})],1),e("b-form-group",{attrs:{id:"description_group",label:"Description","label-for":"description","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-textarea",{attrs:{id:"textarea",rows:"5","max-rows":"5"},model:{value:t.workflow.description,callback:function(e){t.$set(t.workflow,"description",e)},expression:"workflow.description"}})],1),e("div",{staticClass:"text-right"},[e("b-button",{attrs:{variant:"link"},on:{click:t.cancel}},[t._v("Cancel")]),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1)],1)],1)])])},Fs=[],Vs={name:"WorkflowForm",props:{id:Number},data(){return{workflow:{}}},async created(){this.id&&this.getWorkflow()},methods:{title(){return this.persisted()?"Edit Workflow":"New Workflow"},persisted(){return null!=this.id},getWorkflow(){H.getWorkflow(this.id).then(t=>{this.workflow=t}).catch(t=>{404===t?(this.$router.push({name:"workflows"}),this.$store.commit("setAlertError","Workflow not found.")):console.log(t)})},cancel(t){t.preventDefault(),this.persisted()?this.$router.push({name:"workflow",params:{id:String(this.id)}}):this.$router.push({name:"workflows"})},save(t){t.preventDefault(),this.persisted()?H.updateWorkflow(this.id,this.workflow).then(()=>{this.$router.push({name:"workflow",params:{id:String(this.id)}}),this.$store.commit("setAlertSuccess","Workflow updated successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Workflow could not be saved",t))}):H.createWorkflow(this.workflow).then(()=>{this.$router.push({name:"workflows"}),this.$store.commit("setAlertSuccess","Workflow created successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Workflow could not be saved",t))})}}},Hs=Vs,Ys=Object(f["a"])(Hs,Bs,Fs,!1,null,"1cb41524",null),Js=Ys.exports,Ks=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.isLoading?e("div",{staticClass:"row"},[e("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1):t._e(),t.isLoading?t._e():e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg-10"},[e("h1",[t._v(t._s(t.workflow.name))])]),e("div",{staticClass:"col-lg-2 text-right"},[e("b-button",{attrs:{to:{name:"edit_workflow",params:{id:t.workflow.id}},variant:"light"}},[t._v("Edit")]),e("b-button",{attrs:{variant:"danger"},on:{click:t.deleteWorkflow}},[t._v("Delete")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("dl",[e("dt",[t._v("Description")]),e("dd",[t._v(t._s(t.workflow.description))]),e("dt",[t._v("Created")]),e("dd",[t._v(t._s(t.toLocalTime(t.workflow.created)))]),e("dt",[t._v("Updated")]),e("dd",[t._v(t._s(t.toLocalTime(t.workflow.updated)))])])])]),t.isLoading?t._e():e("div",{staticClass:"row my-3"},[t._m(0),e("div",{staticClass:"col-lg-1"},[e("b-button",{attrs:{to:{name:"new_step",params:{workflowId:this.workflow.id}},variant:"primary"}},[t._v("Add")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("step-table",{attrs:{steps:t.workflow.steps}})],1)])])},Zs=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-11"},[e("h3",[t._v("Steps")])])}],Gs=function(){var t=this,e=t._self._c;return e("div",[e("b-input",{attrs:{type:"text",placeholder:"Type to filter"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("b-table",{attrs:{id:"step-table",bordered:"",striped:"","show-empty":"",responsive:"",items:t.steps,fields:t.fields,"sort-by":"order",filter:t.filter,"per-page":t.pageSize,"current-page":t.currentPage},on:{filtered:t.filtered},scopedSlots:t._u([{key:"cell(name)",fn:function(s){return[e("router-link",{attrs:{to:{name:"step",params:{id:s.item.id}}}},[t._v(t._s(s.item.name))])]}}])}),e("b-pagination",{attrs:{"total-rows":t.rowCount,"per-page":t.pageSize,"aria-controls":"step-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},Xs=[],Qs={name:"StepTable",props:{steps:{type:Array,required:!0},pageSize:{type:Number,default:10}},data(){return{filter:null,fields:["order","name","description"],currentPage:1,rowCount:null}},created(){this.rowCount=this.steps.length},methods:{filtered(t){this.rowCount=t.length,this.currentPage=1}}},tr=Qs,er=Object(f["a"])(tr,Gs,Xs,!1,null,"eede7992",null),sr=er.exports,rr={name:"WorkflowView",props:{id:{type:Number,required:!0}},components:{"step-table":sr},data(){return{workflow:null,isLoading:!0}},async created(){this.getWorkflow()},methods:{toLocalTime:R,getWorkflow(){H.getWorkflow(this.id).then(t=>{this.workflow=t,this.isLoading=!1}).catch(t=>{404===t?(this.$router.push({name:"workflows"}),this.$store.commit("setAlertError","Workflow not found.")):console.log(t)})},deleteWorkflow(){confirm("Are you sure? This action cannot be undone.")&&H.deleteWorkflow(this.id).then(()=>{this.$router.push({name:"workflows"}),this.$store.commit("setAlertSuccess","Workflow deleted successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Workflow could not be deleted",t))})}}},ar=rr,ir=Object(f["a"])(ar,Ks,Zs,!1,null,"3a2b1275",null),or=ir.exports,nr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v(t._s(t.title()))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-form",{on:{submit:t.save}},[e("b-form-group",{attrs:{id:"workflow_group",label:"Workflow","label-for":"workflow","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-select",{attrs:{id:"workflow",options:t.workflowOptions,disabled:"",required:""},model:{value:t.step.workflow_id,callback:function(e){t.$set(t.step,"workflow_id",e)},expression:"step.workflow_id"}})],1),e("b-form-group",{attrs:{id:"name_group",label:"Name","label-for":"name","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"name",type:"text",required:""},model:{value:t.step.name,callback:function(e){t.$set(t.step,"name",e)},expression:"step.name"}})],1),e("b-form-group",{attrs:{id:"order_group",label:"Order","label-for":"order","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"order",type:"number",min:"1",step:"1",required:""},model:{value:t.step.order,callback:function(e){t.$set(t.step,"order",e)},expression:"step.order"}})],1),e("b-form-group",{attrs:{id:"description_group",label:"Description","label-for":"description","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-textarea",{attrs:{id:"textarea",rows:"5","max-rows":"5"},model:{value:t.step.description,callback:function(e){t.$set(t.step,"description",e)},expression:"step.description"}})],1),e("div",{staticClass:"text-right"},[e("b-button",{attrs:{variant:"link"},on:{click:t.cancel}},[t._v("Cancel")]),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1)],1)],1)])])},lr=[],cr={name:"StepForm",props:{id:Number,workflowId:Number},data(){return{step:{},workflowOptions:[],userOptions:[]}},async created(){this.id&&this.getStep(),this.getWorkflowOptions(),this.getUserOptions()},methods:{title(){return this.persisted()?"Edit Step":"Add Step"},persisted(){return null!=this.id},getStep(){H.getStep(this.id).then(t=>{this.step=t}).catch(t=>{404===t?(this.$router.push({name:"workflow",params:{id:String(this.workflowId)}}),this.$store.commit("setAlertError","Step not found.")):console.log(t)})},getWorkflowOptions(){H.getWorkflows().then(t=>{t.forEach(t=>{this.workflowOptions.push({value:t.id,text:t.name})}),null!=this.workflowId&&(this.step.workflow_id=this.workflowId)}).catch(t=>{404===t?(this.$router.push({name:"workflows"}),this.$store.commit("setAlertError","Workflow not found.")):console.log(t)})},getUserOptions(){H.getUsers().then(t=>{t.forEach(t=>{this.userOptions.push({value:t.id,text:t.name})})}).catch(t=>{404===t?this.$store.commit("setAlertError","Error retrieving user options."):console.log(t)})},cancel(t){t.preventDefault(),this.$router.push({name:"workflow",params:{id:String(this.step.workflow_id)}})},save(t){t.preventDefault(),this.persisted()?H.updateStep(this.id,this.step).then(()=>{this.$router.push({name:"workflow",params:{id:String(this.step.workflow_id)}}),this.$store.commit("setAlertSuccess","Step updated successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Step could not be saved",t))}):H.createStep(this.step).then(()=>{this.$router.push({name:"workflow",params:{id:String(this.step.workflow_id)}}),this.$store.commit("setAlertSuccess","Step created successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Step could not be saved",t))})}}},dr=cr,ur=Object(f["a"])(dr,nr,lr,!1,null,"ffb14c00",null),pr=ur.exports,mr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.isLoading?e("div",{staticClass:"row"},[e("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1):t._e(),t.isLoading?t._e():e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg-10"},[e("h1",[t._v(t._s(t.step.name))])]),e("div",{staticClass:"col-lg-2 text-right"},[e("b-button",{attrs:{to:{name:"edit_step",params:{id:t.step.id}},variant:"light"}},[t._v("Edit")]),e("b-button",{attrs:{variant:"danger"},on:{click:t.deleteStep}},[t._v("Delete")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("dl",[e("dt",[t._v("Workflow")]),e("dd",[e("router-link",{attrs:{to:{name:"workflow",params:{id:t.step.workflow_id}}}},[t._v(t._s(t.step.workflow_name))])],1),e("dt",[t._v("Order in workflow")]),e("dd",[t._v(t._s(t.step.order))]),e("dt",[t._v("Description")]),e("dd",[t._v(t._s(t.step.description))]),e("dt",[t._v("Created")]),e("dd",[t._v(t._s(t.toLocalTime(t.step.created)))]),e("dt",[t._v("Updated")]),e("dd",[t._v(t._s(t.toLocalTime(t.step.updated)))])])])]),t.isLoading?t._e():e("div",{staticClass:"row my-4"},[t._m(0),e("div",{staticClass:"col-lg-1"},[e("b-button",{attrs:{variant:"primary",to:{name:"new_task_template",params:{stepId:this.id}}}},[t._v("New")])],1)]),t.isLoading?t._e():e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("task-template-table",{attrs:{"step-id":t.step.id,"task-templates":t.step.task_templates}})],1)])])},fr=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-11"},[e("h3",[t._v(" Task Templates ")])])}],hr=function(){var t=this,e=t._self._c;return e("div",[e("b-input",{attrs:{type:"text",placeholder:"Type to filter"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("b-table",{attrs:{id:"task-template-table",bordered:"",striped:"","show-empty":"",responsive:"",items:t.taskTemplates,fields:t.fields,"sort-by":"name",filter:t.filter,"filter-included-fields":["name","description","staff_name"],"per-page":t.pageSize,"current-page":t.currentPage},on:{filtered:t.filtered},scopedSlots:t._u([{key:"cell(name)",fn:function(s){return[e("router-link",{attrs:{to:{name:"edit_task_template",params:{id:s.item.id}}}},[t._v(t._s(s.item.name))])]}},{key:"cell(actions)",fn:function(s){return[e("b-button",{attrs:{size:"sm",variant:"light"},on:{click:function(e){return t.updateTaskTemplate(s.item.id)}}},[t._v("Edit")]),e("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){return t.deleteTaskTemplate(s.item.id)}}},[t._v("Delete")])]}}])}),e("div",{staticClass:"overflow-auto"},[e("b-pagination",{attrs:{"total-rows":t.rowCount,"per-page":t.pageSize,"aria-controls":"task-template-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},gr=[],br={name:"TaskTemplateTable",props:{taskTemplates:{type:Array,required:!0},stepId:{type:Number,required:!0},pageSize:{type:Number,default:10}},data(){return{filter:null,fields:["name","description",{key:"staff_name",label:"Staff"},{key:"created",formatter:R},{key:"updated",formatter:R},"actions"],currentPage:1,rowCount:null}},created(){this.rowCount=this.taskTemplates.length},methods:{updateTaskTemplate(t){this.$router.push({name:"edit_task_template",params:{id:String(t),stepId:String(this.stepId)}})},deleteTaskTemplate(t){confirm("Are you sure? This action cannot be undone.")&&H.deleteTaskTemplate(t).then(()=>{this.taskTemplates=N.a.reject(this.taskTemplates,e=>e.id===t),this.$store.commit("setAlertSuccess","Task template deleted successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Task template could not be deleted",t))})},filtered(t){this.rowCount=t.length,this.currentPage=1}}},vr=br,_r=Object(f["a"])(vr,hr,gr,!1,null,"c5960e0a",null),wr=_r.exports,kr={name:"StepView",components:{"task-template-table":wr},props:{id:{type:Number,required:!0}},data(){return{step:null,isLoading:!0}},async created(){this.getStep()},methods:{toLocalTime:R,getStep(){H.getStep(this.id).then(t=>{this.step=t,this.isLoading=!1}).catch(t=>{404===t?(this.$router.push({name:"workflows"}),this.$store.commit("setAlertError","Step not found.")):console.log(t)})},deleteStep(){confirm("Are you sure? This action cannot be undone.")&&H.deleteStep(this.id).then(()=>{this.$router.push({name:"workflow",params:{id:String(this.step.workflow_id)}}),this.$store.commit("setAlertSuccess","Step deleted successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Step could not be deleted",t))})}}},yr=kr,Cr=Object(f["a"])(yr,mr,fr,!1,null,"4eaef9da",null),xr=Cr.exports,$r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v(t._s(t.title()))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-form",{on:{submit:t.save}},[e("b-form-group",{attrs:{id:"step_group",label:"Step","label-for":"step","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-select",{attrs:{id:"step",options:t.stepOptions,disabled:"",required:""},model:{value:t.taskTemplate.step_id,callback:function(e){t.$set(t.taskTemplate,"step_id",e)},expression:"taskTemplate.step_id"}})],1),e("b-form-group",{attrs:{id:"name_group",label:"Name","label-for":"name","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-input",{attrs:{id:"name",type:"text",required:""},model:{value:t.taskTemplate.name,callback:function(e){t.$set(t.taskTemplate,"name",e)},expression:"taskTemplate.name"}})],1),e("b-form-group",{attrs:{id:"description_group",label:"Description","label-for":"description","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-textarea",{attrs:{id:"textarea",rows:"5","max-rows":"5"},model:{value:t.taskTemplate.description,callback:function(e){t.$set(t.taskTemplate,"description",e)},expression:"taskTemplate.description"}})],1),e("b-form-group",{attrs:{id:"user_group",label:"User","label-for":"user","label-cols-lg":"3","content-cols-lg":"9"}},[e("b-form-select",{attrs:{id:"user",options:t.userOptions,required:""},model:{value:t.taskTemplate.user_id,callback:function(e){t.$set(t.taskTemplate,"user_id",e)},expression:"taskTemplate.user_id"}})],1),e("div",{staticClass:"text-right"},[e("b-button",{attrs:{variant:"link"},on:{click:t.cancel}},[t._v("Cancel")]),e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Save")])],1)],1)],1)])])},Tr=[],Sr={name:"TaskTemplate",props:{id:Number,stepId:Number},data(){return{taskTemplate:{},stepOptions:[],userOptions:[],realStepId:null}},async created(){null!=this.stepId&&(this.realStepId=this.stepId),this.id?this.getTaskTemplate():this.getStepOptions(),this.getUserOptions()},methods:{title(){return this.persisted()?"Edit Task Template":"Add Task Template"},persisted(){return null!=this.id},getTaskTemplate(){H.getTaskTemplate(this.id).then(t=>{this.taskTemplate=t,this.realStepId=this.taskTemplate.step_id,this.getStepOptions()}).catch(t=>{404===t?(this.$router.push({name:"step",params:{id:String(this.stepId)}}),this.$store.commit("setAlertError","Task template not found.")):console.log(t)})},getStepOptions(){H.getStep(this.realStepId).then(t=>{const e=t.workflow_name+" - "+t.name;this.stepOptions.push({value:t.id,text:e}),null!=this.stepId&&(this.taskTemplate.step_id=this.stepId)}).catch(t=>{404===t?(this.$router.push({name:"step",params:{id:String(this.stepId)}}),this.$store.commit("setAlertError","Workflow not found.")):console.log(t)})},getUserOptions(){H.getUsers().then(t=>{t.forEach(t=>{this.userOptions.push({value:t.id,text:t.name})})}).catch(t=>{404===t?this.$store.commit("setAlertError","Error retrieving user options."):console.log(t)})},cancel(t){t.preventDefault(),this.$router.push({name:"step",params:{id:String(this.taskTemplate.stepId)}})},save(t){t.preventDefault(),this.persisted()?H.updateTaskTemplate(this.id,this.taskTemplate).then(()=>{this.$router.push({name:"step",params:{id:String(this.realStepId)}}),this.$store.commit("setAlertSuccess","Task template updated successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Task template could not be saved",t))}):H.createTaskTemplate(this.taskTemplate).then(()=>{this.$router.push({name:"step",params:{id:String(this.realStepId)}}),this.$store.commit("setAlertSuccess","Task template created successfully.")}).catch(t=>{this.$store.commit("setAlertError",lt("Task template could not be saved",t))})}}},Ar=Sr,Er=Object(f["a"])(Ar,$r,Tr,!1,null,"020c97fe",null),Or=Er.exports,Lr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-table",{attrs:{bordered:"",striped:"","show-empty":"",responsive:"",items:t.auditRecords,fields:t.fields,"sort-by":"created","sort-desc":""}})],1)])])},Pr=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v("Audit Report")])])])}],Nr={name:"AuditReport",data(){return{auditRecords:[],fields:[{key:"id",label:"ID"},{key:"created",formatter:R},"message",{key:"user_email",label:"User"}]}},async created(){this.getAuditRecords()},methods:{getAuditRecords(){H.getReport("audit").then(t=>{this.auditRecords=t}).catch(t=>{console.log(t)})}}},Rr=Nr,Mr=Object(f["a"])(Rr,Lr,Pr,!1,null,"0c0abcd3",null),Ur=Mr.exports,Ir=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-table",{attrs:{bordered:"",striped:"","show-empty":"",responsive:"",items:t.referrerReportRecords,fields:t.fields,"sort-by":"count","sort-desc":""},scopedSlots:t._u([{key:"cell(percentage)",fn:function(e){return[t._v(" "+t._s(t.percentage(e.item.count))+" ")]}}])})],1)])])},Dr=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v("Referrer Report")])])])}],qr=(s("13d5"),{name:"ReferrerReport",data(){return{referrerReportRecords:[],fields:[{key:"name",label:"Referrer"},"count","percentage"]}},async created(){this.getReferrerReportRecords()},methods:{getReferrerReportRecords(){H.getReport("referrer").then(t=>{this.referrerReportRecords=t}).catch(t=>{console.log(t)})},percentage(t){const e=N.a.reduce(this.referrerReportRecords,(t,e)=>t+e.count,0);return t/e*100+"%"}}}),jr=qr,zr=Object(f["a"])(jr,Ir,Dr,!1,null,"0c4257d4",null),Wr=zr.exports,Br=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg"},[e("b-table",{attrs:{bordered:"",striped:"","show-empty":"",responsive:"",items:t.reportRecords,fields:t.fields,"sort-by":"amount","sort-desc":""},scopedSlots:t._u([{key:"cell(title)",fn:function(s){return[e("router-link",{attrs:{to:{name:"matter",params:{id:s.item.id}}}},[t._v(t._s(s.item.title))])]}}])})],1)])])},Fr=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row my-3"},[e("div",{staticClass:"col-lg"},[e("h1",[t._v("Outstanding Balances Report")])])])}],Vr={name:"OutstandingBalancesReport",data(){return{reportRecords:[],fields:[{key:"title",label:"Matter"},{key:"amount",formatter:je.format}]}},async created(){this.getReportRecords()},methods:{getReportRecords(){H.getReport("outstanding-balances").then(t=>{this.reportRecords=t}).catch(t=>{console.log(t)})}}},Hr=Vr,Yr=Object(f["a"])(Hr,Br,Fr,!1,null,"6a4c080e",null),Jr=Yr.exports;r["default"].config.productionTip=!1,r["default"].use(i["a"]),r["default"].use(o["a"]),r["default"].use(a["b"]);const Kr={appointment:{list:vs,form:xs,view:Os},client:{list:gt,form:yt,view:Rt},matter:{list:Ee,form:Me,view:Je},referrer:{list:ae,form:de,view:ge},step:{list:null,form:pr,view:xr},task_template:{list:null,form:Or,view:null},transaction:{list:ts,form:os,view:ps},user:{list:jt,form:Ht,view:Xt},workflow:{list:Ws,form:Js,view:or}};class Zr{constructor(t){this.resource=t,this.resourcePath="/"+t,this.plural=t+"s",this.components=Kr[t]}routes(){let t=[];return null!=this.components.list&&t.push(this.listRoute()),null!=this.components.form&&(t.push(this.newRoute()),t.push(this.editRoute())),null!=this.components.view&&t.push(this.viewRoute()),t}listRoute(){return{path:this.resourcePath,component:this.components.list,name:this.plural}}newRoute(){return{path:this.resourcePath+"/new",component:this.components.form,name:"new_"+this.resource,props:!0}}viewRoute(){return{path:this.resourcePath+"/:id",component:this.components.view,name:this.resource,props:t=>({id:Number(t.params.id)})}}editRoute(){return{path:this.resourcePath+"/:id/edit",component:this.components.form,name:"edit_"+this.resource,props:t=>({id:Number(t.params.id)})}}}const Gr=[{path:"/",component:st,name:"home"},{path:"/login",component:ye,name:"login"},...new Zr("appointment").routes(),...new Zr("client").routes(),...new Zr("matter").routes(),...new Zr("referrer").routes(),...new Zr("step").routes(),...new Zr("task_template").routes(),...new Zr("transaction").routes(),...new Zr("user").routes(),...new Zr("workflow").routes(),{path:"/report/audit",component:Ur,name:"audit_report"},{path:"/report/referrer",component:Wr,name:"referrer_report"},{path:"/report/outstanding_balances",component:Jr,name:"outstanding_balances_report"}];r["default"].mixin({beforeRouteEnter(t,e,s){if(Ce["a"].commit("clearAlerts"),e.name!==t.name)if("login"!==e.name&&"login"!==t.name){if(!u["a"].isLoggedIn())return s({name:"login"}),void Ce["a"].commit("setAlertError","Please login to continue");if("login"!==t.name)return u["a"].loginExpired()?(u["a"].logout(),s({name:"login"}),void Ce["a"].commit("setAlertError","Please login to continue")):void s()}else s()}});const Xr=new a["b"]({routes:Gr});new r["default"]({router:Xr,store:Ce["a"],el:"#app",components:{App:S},render:t=>t(S),template:"<App/>"})},"793c":function(t,e,s){"use strict";(function(t){s.d(e,"a",(function(){return a}));var r=s("c0d6");const a={getToken(){return r["a"].getters.getToken},getUserId(){return r["a"].getters.getUserId},login(t,e){r["a"].commit("setToken",t),r["a"].commit("setUserId",e.id),r["a"].commit("setUserName",e.name),r["a"].commit("setUserEmail",e.email),r["a"].commit("setUserCanModifyUsers",e.can_modify_users)},logout(){r["a"].commit("logout")},isLoggedIn(){return null!=this.getToken()},canModifyUsers(){return r["a"].getters.getUserCanModifyUsers},loginExpired(){const t=i(this.getToken());return t.exp<Date.now()/1e3}},i=e=>{const s=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(t.from(s,"base64").toString("ascii").split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(r)}}).call(this,s("b639").Buffer)},a909:function(t,e,s){},b87e:function(t,e,s){t.exports=s.p+"img/gavel.609e1f5b.png"},bc48:function(t,e,s){"use strict";s("4d44")},c0d6:function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var r=s("a026"),a=s("2f62"),i=s("0e44");r["default"].use(a["a"]);const o=new a["a"].Store({state:{alert:null,token:null,userId:null,userEmail:null,userName:null},mutations:{setToken(t,e){t.token=e},setUserId(t,e){t.userId=e},setUserName(t,e){t.userName=e},setUserEmail(t,e){t.userEmail=e},setUserCanModifyUsers(t,e){t.userCanModifyUsers=e},setAlertSuccess(t,e){t.alert={alertType:"success",message:e}},setAlertInfo(t,e){t.alert={alertType:"info",message:e}},setAlertWarning(t,e){t.alert={alertType:"warning",message:e}},setAlertError(t,e){t.alert={alertType:"danger",message:e}},clearAlerts(t){t.alert=null},logout(t){t.token=null,t.userId=null,t.userName=null,t.userEmail=null}},getters:{getAlerts:t=>null==t.alert?[]:[t.alert],getToken:t=>t.token,getUserId:t=>t.userId,getUserName:t=>t.userName,getUserEmail:t=>t.userEmail,getUserCanModifyUsers:t=>t.userCanModifyUsers},plugins:[Object(i["a"])({storage:window.sessionStorage})]})},c247:function(t,e,s){"use strict";s("a909")}});
//# sourceMappingURL=app.ef0f065e.js.map